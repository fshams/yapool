<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Tue Feb 24 18:54:34 CET 2015 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>BoundQueryCache (Yapool Core 0.9.3 API)</title>
<meta name="date" content="2015-02-24">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BoundQueryCache (Yapool Core 0.9.3 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BoundQueryCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?nl/fw/yapool/sql/BoundQueryCache.html" target="_top">Frames</a></li>
<li><a href="BoundQueryCache.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">nl.fw.yapool.sql</div>
<h2 title="Class BoundQueryCache" class="title">Class BoundQueryCache</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../nl/fw/yapool/listener/PoolListener.html" title="class in nl.fw.yapool.listener">nl.fw.yapool.listener.PoolListener</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html" title="class in nl.fw.yapool.sql">nl.fw.yapool.sql.SimpleQueryCache</a></li>
<li>
<ul class="inheritance">
<li>nl.fw.yapool.sql.BoundQueryCache</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://docs.oracle.com/javase/7/docs/api/java/util/EventListener.html?is-external=true" title="class or interface in java.util">EventListener</a>, <a href="../../../../nl/fw/yapool/IPoolListener.html" title="interface in nl.fw.yapool">IPoolListener</a>, <a href="../../../../nl/fw/yapool/sql/IQueryCache.html" title="interface in nl.fw.yapool.sql">IQueryCache</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">BoundQueryCache</span>
extends <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html" title="class in nl.fw.yapool.sql">SimpleQueryCache</a></pre>
<div class="block">A <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html" title="class in nl.fw.yapool.sql"><code>SimpleQueryCache</code></a> that also limits the amount of cached queries (see <a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#setMaxOpen(int)"><code>setMaxOpen(int)</code></a>).
 To keep relevant queries in cache, the <a href="../../../../nl/fw/yapool/sql/CachedStatement.html#getWeight()"><code>CachedStatement.getWeight()</code></a> is used together with <a href="../../../../nl/fw/yapool/sql/CachedStatement.html#isInUse()"><code>CachedStatement.isInUse()</code></a>.
 In general, this cache only works properly when:
 <br> - a LIFO connection queue is used (like <a href="../../../../nl/fw/yapool/sql/SqlPool.html" title="class in nl.fw.yapool.sql"><code>SqlPool</code></a> does).
 <br> - idle connections are closed (default 60 seconds in <a href="../../../../nl/fw/yapool/sql/SqlPool.html" title="class in nl.fw.yapool.sql"><code>SqlPool</code></a>).
 If this is not done, the query cache could end up containing only stale statements. 
 <br> - statements used in a loop are re-used without closing (e.g. when inserting data in a loop).
 <p>
 To fine-tune cache-flushing, use <a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#setMinWeightFactor(int)"><code>setMinWeightFactor(int)</code></a>.
 <br><b>Implementation note</b>: after fetching a query from the cache, the statement must be
 closed using the <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#close(java.sql.Statement)"><code>SimpleQueryCache.close(java.sql.Statement)</code></a> function to mark a statement as 
 "no longer in use" (or if it is not cached, really close it). 
 If the close function is not called, statements are never flushed from cache,
 rendering the cache useless.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Fred</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#DEFAULT_MAX_OPEN">DEFAULT_MAX_OPEN</a></strong></code>
<div class="block">By default, allow a maximum of 200 open queries.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#DEFAULT_MIN_WEIGHT_FACTOR">DEFAULT_MIN_WEIGHT_FACTOR</a></strong></code>
<div class="block">When to remove an under-used cached query.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected org.slf4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#log">log</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicInteger.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicInteger</a></code></td>
<td class="colLast"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#openQueries">openQueries</a></strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_nl.fw.yapool.sql.SimpleQueryCache">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;nl.fw.yapool.sql.<a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html" title="class in nl.fw.yapool.sql">SimpleQueryCache</a></h3>
<code><a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#poolName">poolName</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#qb">qb</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#qcache">qcache</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#qcacheRef">qcacheRef</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#qcacheStats">qcacheStats</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_nl.fw.yapool.listener.PoolListener">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;nl.fw.yapool.listener.<a href="../../../../nl/fw/yapool/listener/PoolListener.html" title="class in nl.fw.yapool.listener">PoolListener</a></h3>
<code><a href="../../../../nl/fw/yapool/listener/PoolListener.html#wantAllEventActions">wantAllEventActions</a>, <a href="../../../../nl/fw/yapool/listener/PoolListener.html#wantEventActions">wantEventActions</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#BoundQueryCache()">BoundQueryCache</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#BoundQueryCache(int)">BoundQueryCache</a></strong>(int&nbsp;maxOpen)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#BoundQueryCache(int, int)">BoundQueryCache</a></strong>(int&nbsp;maxOpen,
               int&nbsp;minWeightFactor)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#addHit(java.util.Map, nl.fw.yapool.sql.CachedStatement)">addHit</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a>&gt;&nbsp;cc,
      <a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a>&nbsp;csHit)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#closedQuery(nl.fw.yapool.sql.CachedStatement)">closedQuery</a></strong>(<a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a>&nbsp;cs)</code>
<div class="block">Removes CachedStatement from reference cache and decreases the open queries counter.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#closeOneAndUnderUsed(java.util.Map)">closeOneAndUnderUsed</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a>&gt;&nbsp;cc)</code>
<div class="block">Removes one un-used query from cache or all queries with weight less than 1.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#createdQuery(nl.fw.yapool.sql.CachedStatement)">createdQuery</a></strong>(<a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a>&nbsp;cs)</code>
<div class="block">Adds CachedStatement to reference cache and increases the open queries counter.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#getConnectionHash(nl.fw.yapool.sql.CachedStatement)">getConnectionHash</a></strong>(<a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a>&nbsp;cs)</code>
<div class="block">Returns connection's hashCode in string format.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a></code></td>
<td class="colLast"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#getLeastRelevant(java.util.Map)">getLeastRelevant</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a>&gt;&nbsp;cc)</code>
<div class="block">Called when cache is full but a new query needs to be added to the cache.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#getMaxOpen()">getMaxOpen</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#getMinWeightFactor()">getMinWeightFactor</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a></code></td>
<td class="colLast"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#getQuery(java.sql.Connection, java.lang.String, boolean)">getQuery</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html?is-external=true" title="class or interface in java.sql">Connection</a>&nbsp;c,
        <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;queryName,
        boolean&nbsp;named)</code>
<div class="block">Gets a (named) prepared statement from cache.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#setMaxOpen(int)">setMaxOpen</a></strong>(int&nbsp;maxOpen)</code>
<div class="block">The maximum amount of (open) cached queries.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#setMinWeightFactor(int)">setMinWeightFactor</a></strong>(int&nbsp;minWeightFactor)</code>
<div class="block">Sets the minimum weight factor.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_nl.fw.yapool.sql.SimpleQueryCache">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;nl.fw.yapool.sql.<a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html" title="class in nl.fw.yapool.sql">SimpleQueryCache</a></h3>
<code><a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#close(nl.fw.yapool.sql.NamedParameterStatement)">close</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#close(java.sql.Statement)">close</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#getConnectionCache(java.sql.Connection)">getConnectionCache</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#getNamedQuery(java.sql.Connection, java.lang.String)">getNamedQuery</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#getQuery(java.sql.Connection, java.lang.String)">getQuery</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#getQueryBuilder()">getQueryBuilder</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#getStats()">getStats</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#isCached(nl.fw.yapool.sql.NamedParameterStatement)">isCached</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#isCached(java.sql.Statement)">isCached</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#listen(nl.fw.yapool.IPool)">listen</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#onPoolEvent(nl.fw.yapool.PoolEvent)">onPoolEvent</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#setQueryBuilder(nl.fw.yapool.sql.IQueryBuilder)">setQueryBuilder</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#setStats(nl.fw.yapool.sql.QueryCacheStats)">setStats</a>, <a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#toString()">toString</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_nl.fw.yapool.listener.PoolListener">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;nl.fw.yapool.listener.<a href="../../../../nl/fw/yapool/listener/PoolListener.html" title="class in nl.fw.yapool.listener">PoolListener</a></h3>
<code><a href="../../../../nl/fw/yapool/listener/PoolListener.html#addWantEvent(java.lang.String...)">addWantEvent</a>, <a href="../../../../nl/fw/yapool/listener/PoolListener.html#getWantEventActions()">getWantEventActions</a>, <a href="../../../../nl/fw/yapool/listener/PoolListener.html#wantAllEventActions()">wantAllEventActions</a>, <a href="../../../../nl/fw/yapool/listener/PoolListener.html#wantsEventAction(java.lang.String)">wantsEventAction</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_nl.fw.yapool.IPoolListener">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;nl.fw.yapool.<a href="../../../../nl/fw/yapool/IPoolListener.html" title="interface in nl.fw.yapool">IPoolListener</a></h3>
<code><a href="../../../../nl/fw/yapool/IPoolListener.html#getWantEventActions()">getWantEventActions</a>, <a href="../../../../nl/fw/yapool/IPoolListener.html#wantAllEventActions()">wantAllEventActions</a>, <a href="../../../../nl/fw/yapool/IPoolListener.html#wantsEventAction(java.lang.String)">wantsEventAction</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="DEFAULT_MAX_OPEN">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_MAX_OPEN</h4>
<pre>public static final&nbsp;int DEFAULT_MAX_OPEN</pre>
<div class="block">By default, allow a maximum of 200 open queries.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#nl.fw.yapool.sql.BoundQueryCache.DEFAULT_MAX_OPEN">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DEFAULT_MIN_WEIGHT_FACTOR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_MIN_WEIGHT_FACTOR</h4>
<pre>public static final&nbsp;int DEFAULT_MIN_WEIGHT_FACTOR</pre>
<div class="block">When to remove an under-used cached query.
 A lower factor removes queries faster, a higher factor removes queries slower.
 Default 5 (which removes queries that are missed 5 times more often then the other queries in the connection's cache).</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#nl.fw.yapool.sql.BoundQueryCache.DEFAULT_MIN_WEIGHT_FACTOR">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="log">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>log</h4>
<pre>protected&nbsp;org.slf4j.Logger log</pre>
</li>
</ul>
<a name="openQueries">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>openQueries</h4>
<pre>protected final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicInteger.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicInteger</a> openQueries</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BoundQueryCache()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BoundQueryCache</h4>
<pre>public&nbsp;BoundQueryCache()</pre>
</li>
</ul>
<a name="BoundQueryCache(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BoundQueryCache</h4>
<pre>public&nbsp;BoundQueryCache(int&nbsp;maxOpen)</pre>
</li>
</ul>
<a name="BoundQueryCache(int, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BoundQueryCache</h4>
<pre>public&nbsp;BoundQueryCache(int&nbsp;maxOpen,
               int&nbsp;minWeightFactor)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="closedQuery(nl.fw.yapool.sql.CachedStatement)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closedQuery</h4>
<pre>protected&nbsp;void&nbsp;closedQuery(<a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a>&nbsp;cs)</pre>
<div class="block">Removes CachedStatement from reference cache and decreases the open queries counter.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#closedQuery(nl.fw.yapool.sql.CachedStatement)">closedQuery</a></code>&nbsp;in class&nbsp;<code><a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html" title="class in nl.fw.yapool.sql">SimpleQueryCache</a></code></dd>
</dl>
</li>
</ul>
<a name="createdQuery(nl.fw.yapool.sql.CachedStatement)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createdQuery</h4>
<pre>protected&nbsp;void&nbsp;createdQuery(<a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a>&nbsp;cs)</pre>
<div class="block">Adds CachedStatement to reference cache and increases the open queries counter.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#createdQuery(nl.fw.yapool.sql.CachedStatement)">createdQuery</a></code>&nbsp;in class&nbsp;<code><a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html" title="class in nl.fw.yapool.sql">SimpleQueryCache</a></code></dd>
</dl>
</li>
</ul>
<a name="getQuery(java.sql.Connection, java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getQuery</h4>
<pre>protected&nbsp;<a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a>&nbsp;getQuery(<a href="http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html?is-external=true" title="class or interface in java.sql">Connection</a>&nbsp;c,
                       <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;queryName,
                       boolean&nbsp;named)
                            throws <a href="http://docs.oracle.com/javase/7/docs/api/java/sql/SQLException.html?is-external=true" title="class or interface in java.sql">SQLException</a></pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#getQuery(java.sql.Connection, java.lang.String, boolean)">SimpleQueryCache</a></code></strong></div>
<div class="block">Gets a (named) prepared statement from cache.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html#getQuery(java.sql.Connection, java.lang.String, boolean)">getQuery</a></code>&nbsp;in class&nbsp;<code><a href="../../../../nl/fw/yapool/sql/SimpleQueryCache.html" title="class in nl.fw.yapool.sql">SimpleQueryCache</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/sql/SQLException.html?is-external=true" title="class or interface in java.sql">SQLException</a></code></dd></dl>
</li>
</ul>
<a name="addHit(java.util.Map, nl.fw.yapool.sql.CachedStatement)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addHit</h4>
<pre>protected&nbsp;void&nbsp;addHit(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a>&gt;&nbsp;cc,
          <a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a>&nbsp;csHit)</pre>
</li>
</ul>
<a name="closeOneAndUnderUsed(java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeOneAndUnderUsed</h4>
<pre>protected&nbsp;boolean&nbsp;closeOneAndUnderUsed(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a>&gt;&nbsp;cc)</pre>
<div class="block">Removes one un-used query from cache or all queries with weight less than 1.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cc</code> - The query cache for the connection.</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if one or more queries were removed from cache.</dd></dl>
</li>
</ul>
<a name="getLeastRelevant(java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLeastRelevant</h4>
<pre>protected&nbsp;<a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a>&nbsp;getLeastRelevant(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a>&gt;&nbsp;cc)</pre>
<div class="block">Called when cache is full but a new query needs to be added to the cache.
 This function can be called in a loop when there are many cached queries with a weight of zero or less.</div>
</li>
</ul>
<a name="getConnectionHash(nl.fw.yapool.sql.CachedStatement)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConnectionHash</h4>
<pre>protected&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getConnectionHash(<a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql">CachedStatement</a>&nbsp;cs)</pre>
<div class="block">Returns connection's hashCode in string format.</div>
</li>
</ul>
<a name="getMaxOpen()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxOpen</h4>
<pre>public&nbsp;int&nbsp;getMaxOpen()</pre>
</li>
</ul>
<a name="setMaxOpen(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxOpen</h4>
<pre>public&nbsp;void&nbsp;setMaxOpen(int&nbsp;maxOpen)</pre>
<div class="block">The maximum amount of (open) cached queries.
 Default set to 200, see <a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#DEFAULT_MAX_OPEN"><code>DEFAULT_MAX_OPEN</code></a>.</div>
</li>
</ul>
<a name="getMinWeightFactor()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMinWeightFactor</h4>
<pre>public&nbsp;int&nbsp;getMinWeightFactor()</pre>
</li>
</ul>
<a name="setMinWeightFactor(int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>setMinWeightFactor</h4>
<pre>public&nbsp;void&nbsp;setMinWeightFactor(int&nbsp;minWeightFactor)</pre>
<div class="block">Sets the minimum weight factor.
 See also <a href="../../../../nl/fw/yapool/sql/BoundQueryCache.html#DEFAULT_MIN_WEIGHT_FACTOR"><code>DEFAULT_MIN_WEIGHT_FACTOR</code></a>.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BoundQueryCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../nl/fw/yapool/sql/CachedStatement.html" title="class in nl.fw.yapool.sql"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?nl/fw/yapool/sql/BoundQueryCache.html" target="_top">Frames</a></li>
<li><a href="BoundQueryCache.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2015. All rights reserved.</small></p>
</body>
</html>
